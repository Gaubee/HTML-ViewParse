<!DOCTYPE html>

<head>
    <title>HTML-ViewParse</title>
    <script type="text/javascript">
    (function(ie) {
        if (!ie) return;
        var b = document.createElement("script");
        b.setAttribute("type", "text/javascript");
        b.setAttribute("src", "http://" + location.hostname + "/firebug-lite/build/firebug-lite.js");
        document.getElementsByTagName("head")[0].appendChild(b)
    }(!+"\v1"));
    </script>
    <script type="text/javascript" src="../build/HTML-ViewParse.debug.js"></script>
</head>

<body>
    <div id="westeros">
        <h1>BookName:《{{title}}》</h1>
        <br>
        {{#teleporter 'thought'}}
        <hr>
        <button status-click="{{'show_books ?> 'true' '}}">Show Books</button>
        {{#if show_books}}
            <!-- 'index' -->
            {{#teleporter}}
        {{/if}}
    </div>
    <script type="text/template" name="author2">
        <h2 style="color:red;">Author: {{author}}</h2>
    </script>
    <script type="text/template" name="author3">
        <h2 style="color:green;">Author: {{author}}</h2>
    </script>
    <script type="text/template" name="books">
        <h4>Books</h4>
        {{#each books}}
            <p>{{$THIS}}</p>
        {{/each}}
    </script>
</body>

</html>

<script type="text/javascript">
ViewParser.ready(function() {
    var westeros = ViewParser.app({
        Id: "westeros",
        Data: {
            title:"A Song of Ice and Fire",
            author:"George Raymond Richard Martin",
            books:[
                "《权力的游戏》(A Game of Thrones)",
                "《列王的纷争》(A Clash of Kings)",
                "《冰雨的风暴》(A Storm of Swords)",
                "《群鸦的盛宴》(A Feast for Crows)",
                "《魔龙的狂舞》(A Dance with Dragons)",
                "《凛冽的寒风》(The Winds of Winter)",
                "《春晓的梦想》(A Dream of Spring)"
            ]
        }
    });
    var author2 = ViewParser.modules["author2"]();
    var author3 = ViewParser.modules["author3"]();
    var books = ViewParser.modules["books"]();
    westeros.collect(author2);
    westeros.collect(author3);
    westeros.collect(books);

    setInterval(function marquee(){
        westeros.teleporter(author3,'thought');
        setTimeout(function(){
            westeros.teleporter(author2,'thought');
        },1000)
        return marquee;
    }(),2000)

    //,'index'
    westeros.teleporter(books);
});
</script>
