<!DOCTYPE html>
<html>
<head>
	<title>HTML-ViewParse</title>
	<script type="text/javascript" src="../build/HTML-ViewParse.debug.js"></script>	
	<script type="text/javascript" src="../src/templateParse.beta.js"></script>	
	<script type="text/javascript">
		(function (ie){if(!ie)return;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src","http://"+location.hostname+"/firebug-lite/build/firebug-lite.js");document.getElementsByTagName("head")[0].appendChild(b)}(!+"\v1")); 
	</script>
	<style type="text/css">
	</style>
</head>
<body>
	<script type="text/template" name="with">
		<h2>{{title}}</h2>
		{{#if show_with}}
			{{#with detail}}
				{{title}}({{show_with}})
				</br>
				{{dateTime}}
			{{/with}}
		{{/if}}
		<hr />
	</script>
	<script type="text/template" name="if!">
	<hr/>
	<h2>haha!</h2>
	{{#if love}}
		you are my love!
	{{#else}}
		I am what I am...
		{{#if too_young_too_simple}}
			But I am eager to love.
		{{#else}}
			No Country For Old Men.
		{{/if}}
	{{/if}}
	<hr/>
</script>
</body>



</html>

<script type="text/javascript">
	ViewParser.scans();
	w = ViewParser.modules["with"]({
		title:"Hehehe",
		detail:{
			dateTime:"2008-8-8 8:00"
		},
		show_with:true
	}).append(document.body)
	setTimeout(function(){
		w.set("show_with",false)
	},1200)
	setTimeout(function(){
		w.set("show_with",true)
		w.set("detail.dateTime","NAN~~~")
	},2400)
	//---------------------
	var aboutLove = ViewParser.modules["if!"];
	var s = aboutLove();
	s.append(document.body);

	// setInterval(function(){
	// 	var t1 = Math.floor(Math.random()*1000);
	// 	setTimeout(function() {
	// 		s.set("love", !(t1%2));
	// 	},t1);
	// 	var t2 = Math.floor(Math.random()*1000);
	// 	setTimeout(function() {
	// 		s.set("too_young_too_simple", !(t2%2));
	// 	},t2);
	// 	console.log(t1,t2,!(t1%2),!(t2%2))
	// },2000);
	setTimeout(function() {
		s.set("love", false);
		s.set("too_young_too_simple", false);
	},1000);
	setTimeout(function() {
		s.set("too_young_too_simple", true);
	},2000);
	setTimeout(function() {
		s.set("love", true);
	},3000);
	setTimeout(function() {
		s.set("too_young_too_simple", false);
	},4000);
</script>