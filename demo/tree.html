<!DOCTYPE html>
<html>
<head>
	<title>HTML-ViewParse</title>
	<script type="text/javascript" src="../build/HTML-ViewParse.debug.js"></script>	
	<script type="text/javascript">
		(function (ie){if(!ie)return;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src","http://"+location.hostname+"/firebug-lite/build/firebug-lite.js");document.getElementsByTagName("head")[0].appendChild(b)}(!+"\v1")); 
	</script>
	<style type="text/css">
	</style>
</head>
<body>
	<ul id="tree"></ul>
<script type="text/template" name="me">
	<a href="#{{name}}">{{name}}</a> is {{age}} years old. <hr>
	<input type="text" bind-form="{{@name}}" attr-value="{{name}}">
</script>

	<script type="text/template" name="tree">
		<input bind-form="{{@name}}" attr-value="{{name}}">
		{{#each list}}
			{{#if  type == '@folder'}}
				<li>
					<p> 
						{{#if name}} 
							{{name}} 
						{{#else}} 
							{{$TOP.name}} 
						{{/if}}
					</p>
				</li>
				<ul>
					{{#> 'tree','$THIS'}}
				</ul>
			{{#else}}
				<li>
					<a attr-href="#{{name}}">
					{{#if  name}}
						{{name}}
					{{#else}} 
						{{$TOP.name}}
					{{/if}} 
					{{#if type}}
						.{{type}}
					{{/if}}
					</a>
					<input bind-form="{{@name}}" attr-value="{{name}}">
				</li>
			{{/if}}
		{{/each}}
	</script>
</body>
</html>

<script type="text/javascript">
	ViewParser.ready(function() {
		model = DataManager({
			name: "Unknown",
			list: [{
				name: "WEB.INF",
				type: "@folder",
				list: [{
					name: "child",
					type: "css"
				}, {
					name: "lib",
					type: "@folder",
					list: [{
						name: "base",
						type: "jar"
					}]
				}, {}]
			}, {
				name: "index",
				type: "jsp"
			}]
		});
		model2 = DataManager({
			name: "zzzzz",
			list: [{
				name: "zzzz.INF",
				type: "@folder",
				list: [{
					name: "cc",
					type: "zzz"
				}, {
					name: "xxx",
					type: "@folder",
					list: [{
						name: "baxxxse",
						type: "jar"
					}]
				}, {}]
			}, {
				name: "inxxxdex",
				type: "jsp"
			}]
		});
		vm = ViewParser.modules["tree"](model).append(document.getElementById('tree'));
	});
	setTimeout(function(){
		// model.set("list.1.type","folder")
		// model.set("list.1.list",[{},{}])
	},1000);
	// setTimeout(function(){
	// 	model.set("list.0.list.length",1);
	// },2000);
	// setTimeout(function(){
	// 	model.set("list.0.list.2",{title:"Gaubee",type:"folder",list:[{}]})
	// },3000);
</script>